% Mobile-C Library 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Preamble {{{
%\documentclass[11pt]{article}
\documentclass[11pt]{report}
\usepackage{varioref}
\usepackage{times,verbatim,fancyheadings,makeidx}
\usepackage{moreverb}
%\usepackage{psfig}
\usepackage[pdftex]{hyperref}
\usepackage{hypcap}
\usepackage{fullpage}
\usepackage{amssymb,amsmath}
\usepackage{graphicx}
\usepackage{program}
%\headrulewidth 0.0pt
%\hoffset=-0.0625in
%\voffset=0pt
\setlength{\textheight}{9in}
\setlength{\textwidth}{6.5in}
\topmargin=0.05in
\makeindex
% }}} Preamble
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Title Page {{{
\begin{document}
\thispagestyle{empty}
\begin{center}
%\includegraphics[width=1.8in]{figure/mobilec_logo.png}


\vspace{0.5in}
{\Huge\sf\bf iMobot Programming API} \\
\vspace{2.0in}
{\large\sf\bf\today}
%September 20, 2007
\end{center}

\pagebreak
% }}} Title Page
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Abstract {{{
%\phantomsection
%\addcontentsline{toc}{chapter}{Abstract}
\begin{abstract} 
This library implements control functions for controlling an iMobot
robotic module.

\end{abstract}
\pagebreak
% Abstract }}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Table of Contents {{{
\pagenumbering{roman}
\setcounter{page}{1}
\tableofcontents
\pagebreak
% }}} Table of Contents
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Part 1 {{{
\pagenumbering{arabic}
\setcounter{page}{1}
\pagebreak
% }}} Part 1 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Introduction {{{
%\pagenumbering{arabic}
%\setcounter{page}{1}
%\pagestyle{fancy}
%\chapter{Introduction}
%\pagebreak
% }}} Introduction
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% iMobot Library Installation {{{
\chapter{iMobot Library Package Contents}
The contents of the package should include a header file named
\texttt{imobot.h}, a static library named \texttt{libimobot.a},
this documentation, a Makefile, and a test program named \texttt{simple.cpp}.

\chapter{Installation}
\begin{enumerate}
\item Copy the package archive onto the iMobot. One way to do this is to use the
built in web browser.
  \begin{enumerate}
  \item Use a VNC client to connect to the imobot. The default IP address of the iMobot is 192.168.0.123.
  \item Log in as yourself with your password.
  \item Left click on the background to open the menu.
  \item Click on the item \texttt{Applications -> Internet -> Midori}, which is the built in web-browser.
  \item Go to the address: http://snake.engr.ucdavis.edu/~dko/
  \item Download the package, named \texttt{libimobot-X.X.zip}, where the \texttt{X}'s represent the latest version number.
  \end{enumerate}
\item Open a terminal by entering the menu and selecting \texttt{Applications -> Accessories -> xterm}.
\item In the terminal, traverse to the directory where you downloaded the zip
file. Use the command \texttt{ls} to list the files and directories in your
current directory, \texttt{cd <dir\_name>} to go to an existing directory, \texttt{pwd} to print
your current directory, and \texttt{cd ..} to go to the parent directory.
\item Unzip the package with the command \texttt{unzip libimobot-X.X.zip}, replacing the X's with the version number that you downloaded.
\item Enter the unzipped directory, \texttt{cd libimobot-X.X.zip}. 
\item Compile the test program with the command \texttt{make}.
\end{enumerate}

\chapter{Compiling Your Applications}
The following steps present a simple way to get your program up and running. In
the following steps, the text \texttt{<PROGRAM>} should be replaced with the
name of your program. All commands should be executed in a terminal.
\begin{enumerate}
\item Create a new directory for your project. \texttt{mkdir <PROGRAM>}
\item Enter the new directory. \texttt{cd <PROGRAM>}
\item Copy the iMobot library and header file into the directory. \texttt{"cp
<LIBIMOBOT\_PATH>/libimobot.a <LIBIMOBOT\_PATH>/imobot.h ."} Make sure to
replace the string \texttt{<LIBIMOBOT\_PATH>} with the full path to the
libimobot-X.X directory.
\item Create your robotic control program. \texttt{chide <PROGRAM>.cpp}
\item Once you have written your program, compile it with the command \texttt{g++ <PROGRAM>.cpp -limobot -o <PROGRAM>} 
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SUB: Overview of Sample Application Programs {{{
\section{Overview of Sample Application Programs}
The following program is a simple program which moves some joints on the iMobot
before initializing the robot to listen for incoming Bluetooth commands.
\subsection{simple.cpp \label{subsec:simple.cpp}}
\listinginput{1}{../Demos/simple_cpp/simple.cpp}
\subsection{Explanation of simple.cpp}
\begin{itemize}
\item Lines 8-10 declare some local variables that are used throughout the program.
\item Line 10 declares the \texttt{robot} object, which represents the
capabilities of the iMobot module. This object contains various member
functions which may be executed by the user.
\item Lines 13-16 send commands to the iMobot to move all the joints to their
zero position.
\item Line 17 causes the program to wait until all the joints have stopped moving. 
\item Lines 20 and 21 instruct the robot to rotate joints 2 and 3 to rotate 90
degrees. Note that the joint numbers start at 0, so joints 2 and 3 are the
third and fourth joints, respectively. 
\item Lines 23 and 24 cause the program to wait until the third and fourth
joints have stopped moving.
\item Lines 26 and 27 instruct the robot to turn the third and fourth joints
back to their original zero position.
\item Lines 28 and 29 cause the program to wait until the third and fourth
joints have stopped moving.
\item Lines 33 and 34 start the Bluetooth listening service on channel 20,
which listens for Bluetooth remote commands and controls the robot accordingly. 
\item Line 37 terminates the robot control.
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SUB: Execution of Sample Applications {{{
\section{Execution of Sample Applications}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Appendix {{{
\appendix
\chapter{libimobot API}
\input{api/libimobot}
\pagebreak
% }}} Appendix 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Index {{{
\phantomsection
\addcontentsline{toc}{chapter}{Index}
\printindex
% }}} Index 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document}
